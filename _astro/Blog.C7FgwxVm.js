import{j as a}from"./jsx-runtime.D_zvdyIk.js";import{R as h}from"./index.6otl1p8d.js";import{s as u,a as i}from"./index.a64eb99d.DzTOEryK.js";const j=e=>{let t;const s=new Set,c=(r,m)=>{const d=typeof r=="function"?r(t):r;if(!Object.is(d,t)){const S=t;t=m??(typeof d!="object"||d===null)?d:Object.assign({},t,d),s.forEach(f=>f(t,S))}},o=()=>t,g={setState:c,getState:o,getInitialState:()=>b,subscribe:r=>(s.add(r),()=>s.delete(r))},b=t=e(c,o,g);return g},p=e=>e?j(e):j,N=e=>e;function y(e,t=N){const s=h.useSyncExternalStore(e.subscribe,()=>t(e.getState()),()=>t(e.getInitialState()));return h.useDebugValue(s),s}const x=e=>{const t=p(e),s=c=>y(t,c);return Object.assign(s,t),s},v=e=>e?x(e):x,T=v(e=>({selectedTags:[],addTag:t=>e(s=>({selectedTags:[...s.selectedTags,t]})),removeTag:t=>e(s=>({selectedTags:s.selectedTags.filter(c=>c!==t)})),clearTags:()=>e({selectedTags:[]})})),C=({allTags:e})=>{const{selectedTags:t,addTag:s,removeTag:c,clearTags:o}=T(),n=l=>{t.includes(l)?c(l):s(l)};return a.jsxs("div",{className:u.tagFilterContainer,children:[a.jsx("div",{className:u.tagList,children:e.map(l=>a.jsx("button",{className:`${u.tagButton} ${t.includes(l)?u.selected:""}`,onClick:()=>n(l),children:l},l))}),t.length>0&&a.jsx("button",{onClick:o,className:u.clearButton,children:"Clear Filters"})]})},k=({posts:e,allTags:t,defaultImageSrc:s})=>{const{selectedTags:c}=T(),o=c.length===0?e:e.filter(n=>n.data.tags&&c.every(l=>n.data.tags?.includes(l)));return a.jsxs("main",{className:i.container,children:[a.jsx("h1",{children:"Lopyad Blog"}),a.jsx(C,{allTags:t}),a.jsx("ul",{className:i.postList,children:o.map(n=>a.jsx("li",{className:i.postItem,children:a.jsxs("a",{href:`/blog/${n.slug}`,children:[a.jsx("img",{src:n.data.thumbnail||s,alt:n.data.title,className:i.postThumbnail}),a.jsxs("div",{className:i.postContent,children:[a.jsx("h2",{className:i.postTitle,children:n.data.title}),a.jsx("p",{className:i.postDate,children:new Date(n.data.pubDate).toLocaleDateString("ko-KR")}),a.jsx("p",{className:i.postDescription,children:n.data.description})]})]})},n.slug))})]})};export{k as default};
